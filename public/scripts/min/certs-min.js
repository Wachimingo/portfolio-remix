const modifyBtns = document.querySelectorAll('[class*="card-modify-btn"]'), removeBtns = document.querySelectorAll('[class*="card-remove-btn"]'), addBtn = document.getElementById("addNewCertBtn"), modal = document.getElementById("certs-modal"), form = document.getElementById("certsForm"), formTitle = document.getElementById("formTitle"), formCancelBtn = document.getElementById("formCancelBtn"), formSubmitBtn = document.getElementById("formSubmitBtn"), certIdInput = document.getElementById("certIdInput"), certNameInput = document.getElementById("certNameInput"), certDescriptionInput = document.getElementById("certDescriptionInput"), certIconInput = document.getElementById("certIconInput"); function openModal(e) { form.action = "/admin/certs?method=post", formSubmitBtn.value = "Add", formTitle.innerText = "Add new cert", certNameInput.value = "", certDescriptionInput.value = "", certIconInput.value = "", certIconInput.value = "", certIdInput.value = "", "update" === e && (form.action = "/admin/certs?method=patch", formSubmitBtn.value = "Update", formTitle.innerText = "Update cert", certIdInput.value = this.getAttribute("data-cert-id"), certNameInput.value = this.getAttribute("data-cert-name"), certDescriptionInput.value = this.getAttribute("data-cert-description"), certIconInput.value = this.getAttribute("data-cert-icon")), modal.classList.remove("none"), window.addEventListener("click", closeWhenClickOutside) } const closeModal = () => { modal.classList.add("none") }; function closeWhenClickOutside(e) { e.target == modal && (window.removeEventListener("click", closeWhenClickOutside), closeModal()) } function deletecert() { fetch("/admin/certs?method=delete&_id=" + this.getAttribute("data-cert-id"), { method: "post" }).then((() => document.location.reload())) } window.addEventListener("click", closeWhenClickOutside), modifyBtns.forEach((e => { e.onclick = openModal.bind(e, "update") })), removeBtns.forEach((e => { e.onclick = deletecert.bind(e) })), addBtn.onclick = openModal.bind(this, "add"), modal.firstChild.firstChild.addEventListener("click", closeModal), formCancelBtn.addEventListener("click", closeModal);